#!/usr/bin/env bash

printf "\nChecking GitHub Actions...\n\n"

gh_actions_filename=".github/workflows/lint.yml"

if [ -f "$gh_actions_filename" ]; then
  printf "$gh_actions_filename already exists.\n"
else
  printf "\nAdding GitHub Actions workflow...\n"

  mkdir -p .github/workflows
  cp ${BIN_DIR}/../stubs/github-actions/lint.yml $gh_actions_filename

  read -p "Enter the name of your primary branch [main]: " primary_branch
  primary_branch=${primary_branch:-main}
  sed -i '' "s/YOUR_BRANCH_NAME/${primary_branch}/g" $gh_actions_filename

  read -p "Enter your PHP version [8.1]: " php_version
  php_version=${php_version:-8.1}
  sed -i '' "s/YOUR_PHP_VERSION/${php_version}/g" $gh_actions_filename

  printf "\nCreated $gh_actions_filename.\n"
fi
